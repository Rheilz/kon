<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visualisasi Graf</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="text/javascript" src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f8f8;
        }
        .header-bg {
            background-color: #0d3463;
            color: white;
        }
        #networkContainer {
            width: 100%;
            height: 500px;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            background-color: #ffffff;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05),0 2px 4px -2px rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            margin-bottom: 1rem;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin-top: 1rem;
            background-color: #ffffff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            border-radius: 0.5rem;
            overflow: hidden;
        }
        th, td {
            border: 1px solid #e5e7eb;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #f1f5f9;
        }
        ul { list-style-type: none; padding-left: 0; }
        ul li { padding: 4px 0; }
    </style>
</head>
<body>
    <div class="header-bg text-xs py-1 px-4">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <!-- Blue streak remains -->
        </div>
    </div>

    <nav class="bg-white shadow-md">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 flex justify-start items-center">
            <div class="flex space-x-6 text-gray-700 font-medium">
                <a href="About1.html" class="hover:text-green-600 transition duration-150">Profile</a>
<a href="graph.html" class="hover:text-green-600 transition duration-150">Graph</a>
<a href="kon.html" class="hover:text-green-600 transition duration-150">Connection Map</a>
            </div>
        </div>
    </nav>

    <div class="max-w-4xl mx-auto p-8 md:p-12">
        <h1 class="text-4xl md:text-5xl font-extrabold text-gray-900 mb-10 tracking-tight">
            Visualisasi Graf
        </h1>

        <div class="space-y-6 mb-8">
            <div class="flex flex-col space-y-2">
                <label for="nodeCount" class="text-lg font-semibold text-gray-800">Masukkan jumlah node</label>
                <div class="flex items-center bg-white rounded-lg shadow-md overflow-hidden border border-gray-200">
                    <input type="number" id="nodeCount" value="5" min="0" class="w-full bg-transparent p-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-green-500" onchange="updateGraph()">
                    <button onclick="changeCount('nodeCount', 1)" class="p-3 text-xl font-bold text-gray-600 hover:bg-gray-100 transition duration-150">+</button>
                    <button onclick="changeCount('nodeCount', -1)" class="p-3 text-xl font-bold text-gray-600 hover:bg-gray-100 transition duration-150 border-l border-gray-300">-</button>
                </div>
            </div>

            <div class="flex flex-col space-y-2">
                <label for="edgeCount" class="text-lg font-semibold text-gray-800">Masukkan jumlah edge</label>
                <div class="flex items-center bg-white rounded-lg shadow-md overflow-hidden border border-gray-200">
                    <input type="number" id="edgeCount" value="3" min="0" class="w-full bg-transparent p-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-green-500" onchange="updateGraph()">
                    <button onclick="changeCount('edgeCount', 1)" class="p-3 text-xl font-bold text-gray-600 hover:bg-gray-100 transition duration-150">+</button>
                    <button onclick="changeCount('edgeCount', -1)" class="p-3 text-xl font-bold text-gray-600 hover:bg-gray-100 transition duration-150 border-l border-gray-300">-</button>
                </div>
            </div>
        </div>

        <h2 id="graphTitle" class="text-xl font-semibold text-center mb-6 text-gray-800"></h2>
        <div id="networkContainer"></div>

        <div>
            <h2 class="text-xl font-semibold mb-2">Degree Tiap Node</h2>
            <ul id="degreeList"></ul>

            <h2 class="text-xl font-semibold mb-2">Adjacency Matrix</h2>
            <div id="adjMatrixContainer"></div>
        </div>
    </div>

    <script>
        let network = null;

        function changeCount(id, delta) {
            const input = document.getElementById(id);
            let value = parseInt(input.value) || 0;
            value += delta;
            if(value < 0) value = 0;
            input.value = value;
            updateGraph();
        }

        function displayNoGraphMessage(container){
            document.getElementById('graphTitle').textContent = 'Grafik Tidak Tersedia';
            container.innerHTML = '<p class="text-2xl font-bold text-gray-500 p-4">Grafik Tidak Tersedia</p>';
            container.style.display = 'flex';
            container.style.alignItems = 'center';
            container.style.justifyContent = 'center';
        }

        function updateGraph(){
            const nodeCount = parseInt(document.getElementById('nodeCount').value) || 0;
            const edgeCount = parseInt(document.getElementById('edgeCount').value) || 0;
            const container = document.getElementById('networkContainer');
            container.innerHTML = '';
            document.getElementById('degreeList').innerHTML = '';
            document.getElementById('adjMatrixContainer').innerHTML = '';

            if(nodeCount < 1 || edgeCount < 1){
                displayNoGraphMessage(container);
                return;
            }

            if(network) { network.destroy(); network=null; }

            const nodes = new vis.DataSet(Array.from({length: nodeCount}, (_, i)=>({id:i,label:(i+1).toString(), color:{background:'#90cdf4',border:'#4c90f0'}})));
            
            const edges = new vis.DataSet();
            const existingEdges = new Set();
            const maxEdges = Math.min(edgeCount, nodeCount*(nodeCount-1)/2);
            let added=0, attempts=0;
            while(added<maxEdges && attempts<maxEdges*5){
                const from = Math.floor(Math.random()*nodeCount);
                const to = Math.floor(Math.random()*nodeCount);
                if(from!==to){
                    const key = from<to ? `${from}-${to}` : `${to}-${from}`;
                    if(!existingEdges.has(key)){
                        edges.add({from,to,color:{color:'#4a5568'}});
                        existingEdges.add(key);
                        added++;
                    }
                }
                attempts++;
            }

            if(added<edgeCount){
                displayNoGraphMessage(container);
                return;
            }

            document.getElementById('graphTitle').textContent = `Graf dengan ${nodeCount} Node dan ${added} Edge`;

            // Draw network
            network = new vis.Network(container,{nodes,edges},{
                nodes:{shape:'circle', size:20, font:{size:14, color:'#000000'}},
                edges:{width:2},
                physics:{stabilization:false},
                interaction:{hover:true, dragNodes:true}
            });

            // Calculate degrees
            const degrees = Array(nodeCount).fill(0);
            edges.forEach(e=>{ degrees[e.from]++; degrees[e.to]++; });
            const degreeList = document.getElementById('degreeList');
            degrees.forEach((deg,i)=>{ 
                const li = document.createElement('li'); 
                li.textContent = `Node ${i+1}: ${deg}`; 
                degreeList.appendChild(li);
            });

            // Build adjacency matrix
            const matrix = Array.from({length: nodeCount}, ()=>Array(nodeCount).fill(0));
            edges.forEach(e=>{ matrix[e.from][e.to]=1; matrix[e.to][e.from]=1; });

            const table = document.createElement('table');
            const thead = document.createElement('thead');
            const headerRow = document.createElement('tr');
            headerRow.appendChild(document.createElement('th'));
            for(let i=0;i<nodeCount;i++){ const th=document.createElement('th'); th.textContent=i+1; headerRow.appendChild(th); }
            thead.appendChild(headerRow);
            table.appendChild(thead);

            const tbody = document.createElement('tbody');
            for(let i=0;i<nodeCount;i++){
                const row = document.createElement('tr');
                const th = document.createElement('th'); th.textContent=i+1; row.appendChild(th);
                for(let j=0;j<nodeCount;j++){ const td=document.createElement('td'); td.textContent = matrix[i][j]; row.appendChild(td); }
                tbody.appendChild(row);
            }
            table.appendChild(tbody);
            document.getElementById('adjMatrixContainer').appendChild(table);
        }

        window.onload = updateGraph;
    </script>
</body>
</html>

